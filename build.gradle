apply plugin: "groovy"
apply plugin: "application"
apply plugin: "metridoc"

group = "com.github.metridoc-job-cli"
mainClassName = "metridoc.cli.MetridocMain"
applicationName = "mdoc"

sourceCompatibility = "1.6"
targetCompatibility = "1.6"
archivesBaseName = "metridoc-job-cli"
version = "0.1-SNAPSHOT"

buildscript {
    repositories {
        maven {
            url = "http://dl.bintray.com/upennlib/metridoc"
        }
    }

    dependencies {
        classpath "com.github.metridoc:metridoc-gradle-plugin:0.1.3"
    }
}

project.ext {
    bintrayRepo = "http://dl.bintray.com/upennlib/metridoc-distributions"
}

repositories {
    mavenCentral()
    mavenLocal()
    maven {
        url "http://jcenter.bintray.com/"
    }
    maven {
        url "http://dl.bintray.com/upennlib/metridoc"
    }
}

dependencies {
    compile 'org.codehaus.groovy:groovy-all:2.0.8',
            'com.github.metridoc:metridoc-tool-gorm:0.1',
            'org.apache.commons:commons-compress:1.5'
    testCompile 'org.spockframework:spock-core:0.7-groovy-2.0'
}

task uploadDist(type: metridoc.gradle.GenericBintrayUpload, dependsOn: "distZip") {
    artifactFile = distZip.archivePath
    bintrayRepo = "https://api.bintray.com/content/upennlib/metridoc-distributions/${archivesBaseName}/$version/${distZip.archiveName}"
}